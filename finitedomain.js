"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},Solver=function(){function a(){"use asm";function a(a,b,c){a=a|0;b=b|0;c=c|0;return a|d(b,c)}function b(a,b){a=a|0;b=b|0;return(a&1<<b)!=0|0}function c(a){a=a|0;return 1<<a}function d(a,b){a=a|0;b=b|0;return(1<<1+(b|0)-(a|0))-1<<a}function e(a){a=a|0;a=a|a>>1;a=a|a>>2;a=a|a>>4;a=a|a>>8;a=a|a>>16;return a|0}function f(a){a=a|0;var b=0;b=n(a)|0;return((a|0)==1<<b?b:-1)|0}function g(a,b){a=a|0;b=b|0;return a&b}function h(a,b){a=a|0;b=b|0;return(a&b)==0|0}function i(a){a=a|0;var b=0;var c=0;b=(l(a)|0)==0|0;c=(a|0)!=0|0;return b&c}function j(a,b){a=a|0;b=b|0;return(a|0)==1<<b|0}function k(a){a=a|0;var b=0;var c=0;b=(l(a)|0)!=0|0;c=(a|0)!=0|0;return b&c}function l(a){a=a|0;return a&a-1}function m(a){a=a|0;var b=30;switch(a|0){case 0:return-1;case 1:return 0;case 2:return 1;case 3:return 1}do{if(a&1<<b)break;b=b-1|0}while((b|0)>=0);return b|0}function n(a){a=a|0;if((a|0)==1)return 0;if((a|0)==2)return 1;if((a|0)==3)return 0;switch((a&-a)%37|0){case 0:return-1;case 1:return 0;case 2:return 1;case 3:return 26;case 4:return 2;case 5:return 23;case 6:return 27;case 7:return 0;case 8:return 3;case 9:return 16;case 10:return 24;case 11:return 30;case 12:return 28;case 13:return 11;case 14:return 0;case 15:return 13;case 16:return 4;case 17:return 7;case 18:return 17;case 19:return 0;case 20:return 25;case 21:return 22;case 22:return-1;case 23:return 15;case 24:return 29;case 25:return 10;case 26:return 12;case 27:return 6;case 28:return 0;case 29:return 21;case 30:return 14;case 31:return 9;case 32:return 5;case 33:return 20;case 34:return 8;case 35:return 19}return 18}function o(a,b){a=a|0;b=b|0;switch(b|0){case 0:return 0;case 1:return a&0x00000001;case 2:return a&0x00000003;case 3:return a&0x00000007;case 4:return a&0x0000000f;case 5:return a&0x0000001f;case 6:return a&0x0000003f;case 7:return a&0x0000007f;case 8:return a&0x000000ff;case 9:return a&0x000001ff;case 10:return a&0x000003ff;case 11:return a&0x000007ff;case 12:return a&0x00000fff;case 13:return a&0x00001fff;case 14:return a&0x00003fff;case 15:return a&0x00007fff;case 16:return a&0x0000ffff;case 17:return a&0x0001ffff;case 18:return a&0x0003ffff;case 19:return a&0x0007ffff;case 20:return a&0x000fffff;case 21:return a&0x001fffff;case 22:return a&0x003fffff;case 23:return a&0x007fffff;case 24:return a&0x00ffffff;case 25:return a&0x01ffffff;case 26:return a&0x03ffffff;case 27:return a&0x07ffffff;case 28:return a&0x0fffffff;case 30:return a|0}return a|0}function p(a,b){a=a|0;b=b|0;switch(b|0){case 0:return a&0x7ffffffe;case 1:return a&0x7ffffffc;case 2:return a&0x7ffffff8;case 3:return a&0x7ffffff0;case 4:return a&0x7fffffe0;case 5:return a&0x7fffffc0;case 6:return a&0x7fffff80;case 7:return a&0x7fffff00;case 8:return a&0x7ffffe00;case 9:return a&0x7ffffc00;case 10:return a&0x7ffff800;case 11:return a&0x7ffff000;case 12:return a&0x7fffe000;case 13:return a&0x7fffc000;case 14:return a&0x7fff8000;case 15:return a&0x7fff0000;case 16:return a&0x7ffe0000;case 17:return a&0x7ffc0000;case 18:return a&0x7ff80000;case 19:return a&0x7ff00000;case 20:return a&0x7fe00000;case 21:return a&0x7fc00000;case 22:return a&0x7f800000;case 23:return a&0x7f000000;case 24:return a&0x7e000000;case 25:return a&0x7c000000;case 26:return a&0x78000000;case 27:return a&0x70000000;case 28:return a&0x60000000;case 29:return a&0x40000000;case 30:return 0}return 0}function q(a,b){a=a|0;b=b|0;var c=0;if((b|0)>30)return a|0;c=1<<b;return(a|c)^c}function r(a){a=a|0;switch(a|0){case 0:return 0;case 1:return 1;case 2:return 1;case 3:return 2}return(a&1)+(a>>1&1)+(a>>2&1)+(a>>3&1)+(a>>4&1)+(a>>5&1)+(a>>6&1)+(a>>7&1)+(a>>8&1)+(a>>9&1)+(a>>10&1)+(a>>11&1)+(a>>12&1)+(a>>13&1)+(a>>14&1)+(a>>15&1)+(a>>16&1)+(a>>17&1)+(a>>18&1)+(a>>19&1)+(a>>20&1)+(a>>21&1)+(a>>22&1)+(a>>23&1)+(a>>24&1)+(a>>25&1)+(a>>26&1)+(a>>27&1)+(a>>28&1)+(a>>29&1)+(a>>30&1)+(a>>31&1)|0}return{addRange:a,containsValue:b,createRange:d,createValue:c,createRangeZeroToMax:e,getValue:f,intersection:g,isSolved:i,isUndetermined:k,isValue:j,max:m,min:n,removeGte:o,removeLte:p,removeValue:q,sharesNoElements:h,size:r}}function b(){var a={_class:"$config",_var_names_trie:ud(),_changedVarsTrie:void 0,_propagationBatch:0,_propagationCycles:0,_front:void 0,varStratConfig:m(),valueStratName:"min",targetedVars:"all",var_dist_options:{},timeout_callback:void 0,all_var_names:[],all_constraints:[],constant_cache:{},initial_domains:[],_propagators:[],_varToPropagators:[],_constrainedAway:[]};return a}function c(a,b){var c=a.varStratConfig,d=a.valueStratName,e=a.targetedVars,f=a.var_dist_options,g=a.timeout_callback,h=a.constant_cache,i=a.all_var_names,j=a.all_constraints,k=a.initial_domains,l=a._propagators,m=a._varToPropagators,n=a._constrainedAway,o=a._propagationBatch,p=a._propagationCycles,q={_class:"$config",_var_names_trie:ud(i),_changedVarsTrie:void 0,_propagationBatch:o,_propagationCycles:p,_front:void 0,varStratConfig:c,valueStratName:d,targetedVars:e instanceof Array?e.slice(0):e,var_dist_options:JSON.parse(JSON.stringify(f)),timeout_callback:g,constant_cache:h,all_var_names:i.slice(0),all_constraints:j.slice(0),initial_domains:b||k,_propagators:l&&l.slice(0),_varToPropagators:m&&m.slice(0),_constrainedAway:n&&n.slice(0)};return q}function d(a){return e(a,!0)}function e(a,b){return k(a,b,kb(hb(cf,df)))}function f(a,b,c){return b===c?i(a,b):g(a,!0,b,c)}function g(a,b,c,d){var e=kb(hb(c,d));return k(a,b,e)}function h(a,b,c){return k(a,b,pb(c))}function i(a,b){return void 0!==a.constant_cache[b]?a.constant_cache[b]:j(a,!0,b)}function j(a,b,c){var d=kb(hb(c,c));return k(a,b,d)}function k(a,b,c){var d=a.all_var_names,e=d.length,f=b===!0;f&&(b=String(e)),e<100&&Id(a._var_names_trie,b)&&(f&&bc("DONT_USE_NUMBERS_AS_VAR_NAMES"),bc("Var varName already part of this config. Probably a bug?"));var g=ka(c);return g===ef||a.constant_cache[g]||(a.constant_cache[g]=e),a.initial_domains[e]=c,a.all_var_names.push(b),Ad(a._var_names_trie,b,e),e}function l(a,b){var c=J(b);for(var d in c)n(a,d,c[d])}function m(a){return{_class:"$var_strat_config",type:a&&a.type||"naive",priorityByName:a&&a.priorityList,_priorityByIndex:void 0,inverted:!(!a||!a.inverted),fallback:a&&a.fallback}}function n(a,b,c,d){switch(b){case"varStrategy":"function"==typeof c&&bc("functions no longer supported"),"string"==typeof c&&bc("strings should be type property"),"object"!==("undefined"==typeof c?"undefined":_typeof(c))&&bc("varStrategy should be object"),c.name&&bc("name should be type"),c.dist_name&&bc("dist_name should be type");var e=m(c);for(a.varStratConfig=e;e.fallback;)e.fallback=m(e.fallback),e=e.fallback;break;case"valueStrategy":a.valueStratName=c;break;case"targeted_var_names":c&&c.length||bc("ONLY_USE_WITH_SOME_TARGET_VARS"),a.targetedVars=c;break;case"varStratOverrides":for(var f in c)n(a,"varStratOverride",c[f],f);break;case"varStratOverride":a.var_dist_options||(a.var_dist_options={}),a.var_dist_options[d]=c;break;case"varValueStrat":a.var_dist_options[d]||(a.var_dist_options[d]={}),a.var_dist_options[d]=c;break;case"timeout_callback":a.timeout_callback=c;break;case"var":return bc("REMOVED. Replace `var` with `varStrategy`");case"val":return bc("REMOVED. Replace `var` with `valueStrategy`");default:bc("unknown option")}}function o(a,b){b&&(b.varStrategy&&n(a,"varStrategy",b.varStrategy),b.valueStrategy&&n(a,"valueStrategy",b.valueStrategy),b.targeted_var_names&&n(a,"targeted_var_names",b.targeted_var_names),b.varStratOverrides&&n(a,"varStratOverrides",b.varStratOverrides),b.varStratOverride&&n(a,"varStratOverride",b.varStratOverride,b.varStratOverrideName),b.varValueStrat&&n(a,"varValueStrat",b.varValueStrat,b.varStratOverrideName),b.timeout_callback&&n(a,"timeout_callback",b.timeout_callback))}function p(a,b){a._propagators.push(b)}function q(a,b){for(var c=b.vardoms,d=a.initial_domains,e=a.all_var_names,f=0,g=e.length;f<g;f++){var h=d[f];c[f]=rb(h)}}function r(a){for(var b=new Array(a.all_var_names.length),c=a._propagators,d=a.initial_domains,e=0,f=c.length;e<f;++e){var g=c[e];s(g.index1,d,b,e),g.index2>=0&&s(g.index2,d,b,e),g.index3>=0&&s(g.index3,d,b,e)}a._varToPropagators=b}function s(a,b,c,d){Xa(b[a])||(c[a]?c[a].indexOf(d)<0&&c[a].push(d):c[a]=[d])}function t(a,b,c,e){var g=c[0];{if(!(g instanceof Array)){var h=!1;switch(b){case"reifier":h=!0;case"plus":case"min":case"ring-mul":case"ring-div":case"mul":case"sum":case"product":var j="product"===b||"sum"===b,k=j?e:c[2],l=void 0,m="undefined"==typeof k;m?(l=h?f(a,0,1):d(a),k=a.all_var_names[l]):"number"==typeof k?(l=i(a,k),k=a.all_var_names[l]):"string"!=typeof k?bc("expecting result var name to be absent or a number or string: `"+k+"`"):l=a.all_var_names.indexOf(k),j?e=l:c[2]=k;for(var n=!1,o=0,p=c.length-(j?0:1);o<p;++o)if("number"==typeof c[o]){var q=i(a,c[o]);c[o]=a.all_var_names[q]}else n=!0;n||bc("E_MUST_GET_AT_LEAST_ONE_VAR_NAME"),g=k;break;case"markov":case"distinct":case"eq":case"neq":case"lt":case"lte":case"gt":case"gte":for(var r=!1,s=0,v=c.length;s<v;++s)if("number"==typeof c[s]){var w=i(a,c[s]);c[s]=a.all_var_names[w],g=c[s]}else r=!0;r||bc("E_MUST_GET_AT_LEAST_ONE_VAR_NAME_ONLY_GOT_CONSTANTS");break;default:bc("UNKNOWN_PROPAGATOR "+b)}for(var x=[],y=0,z=c.length;y<z;++y){var A=Gd(a._var_names_trie,c[y]);x[y]=A}if("sum"===b){for(var B=a.initial_domains,C=B[x[0]],D=1,E=x.length;D<E;++D){var F=x[D];C=Ib(C,B[F])}if(B[e]=kb(Ca(C,B[e])),x.length>1){for(var G=[],H=gb(0),J=0,K=x.length;J<K;++J){var L=x[J],M=B[L],N=ka(M);N===lf?G.push(L):0!==N&&(H=Ib(H,M))}var O=ja(H);if(0!==O){var P=i(a,O);G.push(P)}G.length||(B[e]=kb(Ca(se,B[e]))),x=G}}if(!u(a,b,x,e)){var Q=I(b,x,e);a.all_constraints.push(Q)}return g}var R=ac(g);if(0===R.length)return c[1];for(var S=0,T=R.length;S<T;++S)t(a,b,[].concat(R[S],c.slice(1)),e)}}function u(a,b,c,d){return"lte"===b||"lt"===b?v(a,b,c):"gte"===b||"gt"===b?w(a,b,c):"eq"===b?x(a,b,c):"neq"===b?y(a,b,c):"reifier"===b?z(a,b,c,d):"sum"===b?!c.length||D(a,b,c,d):"product"===b&&D(a,b,c,d)}function v(a,b,c){var d=a.initial_domains,e=c[0],f=c[1],g=d[e],h=d[f],i=ka(g);return i!==lf?(d[f]=kb(ab(h,i-("lt"===b?0:1))),a._constrainedAway.push(e,f),!0):(i=ka(h),i!==lf?(d[e]=kb($a(g,i+("lt"===b?0:1))),a._constrainedAway.push(e,f),!0):(d[e]=kb($a(g,Ta(h)+("lt"===b?0:1))),d[f]=kb(ab(h,Ra(g)-("lt"===b?0:1))),!1))}function w(a,b,c){var d=a.initial_domains,e=c[0],f=c[1],g=d[e],h=d[f],i=ka(g);return i!==lf?(d[f]=kb($a(h,i+("gt"===b?0:1))),a._constrainedAway.push(e,f),!0):(i=ka(h),i!==lf?(d[e]=kb(ab(g,i-("gt"===b?0:1))),a._constrainedAway.push(e,f),!0):(d[e]=kb(ab(g,Ra(h)-("gt"===b?0:1))),d[f]=kb($a(h,Ta(g)+("gt"===b?0:1))),!1))}function x(a,b,c){var d=a.initial_domains,e=c[0],f=c[1],g=d[e],h=d[f],i=ka(g);if(i===lf&&(i=ka(h)),i!==lf){var j=kb(Ea(g,h));return d[e]=j,d[f]=j,a._constrainedAway.push(e,f),!0}return!1}function y(a,b,c){var d=a.initial_domains,e=c[0],f=c[1],g=ka(d[e]);return g!==lf?(d[f]=kb(cb(d[f],g)),a._constrainedAway.push(e,f),!0):(g=ka(d[f]),g!==lf&&(d[e]=kb(cb(d[e],g)),a._constrainedAway.push(e,f),!0))}function z(a,b,c,d){var e=a.initial_domains,f=c[0],g=c[1],h=c[2],i=e[f],j=e[g];i&&j||bc("E_NON_EMPTY_DOMAINS_EXPECTED");var k=ka(e[f]),l=ka(e[g]),m=k!==lf,n=l!==lf;if(m&&n)return A(a,c,d,k,l);var o=ka(e[h]),p=o!==lf;if(p){if(m)return B(a,d,g,k,o,i,j);if(n)return C(a,d,f,l,o,i,j)}if("eq"!==d&&"neq"!==d)if("lt"===d){if(Ta(i)<Ra(j))return e[h]=kb(cb(e[h],0)),a._constrainedAway.push(f,g,h),!0;if(Ra(i)>=Ta(j))return e[h]=kb(cb(e[h],1)),a._constrainedAway.push(f,g,h),!0}else if("lte"===d){if(Ta(i)<=Ra(j))return e[h]=kb(cb(e[h],0)),a._constrainedAway.push(f,g,h),!0;if(Ra(i)>Ta(j))return e[h]=kb(cb(e[h],1)),a._constrainedAway.push(f,g,h),!0}else if("gt"===d){if(Ra(i)>Ta(j))return e[h]=kb(cb(e[h],0)),a._constrainedAway.push(f,g,h),!0;if(Ta(i)<=Ra(j))return e[h]=kb(cb(e[h],1)),a._constrainedAway.push(f,g,h),!0}else if("gte"===d){if(Ra(i)>=Ta(j))return e[h]=kb(cb(e[h],0)),a._constrainedAway.push(f,g,h),!0;if(Ta(i)<Ra(j))return e[h]=kb(cb(e[h],1)),a._constrainedAway.push(f,g,h),!0}else bc("UNKNOWN_OP");return!1}function A(a,b,c,d,e){var f=a.initial_domains,g=b[2],h=!1;switch(c){case"lt":h=d<e;break;case"lte":h=d<=e;break;case"gt":h=d>e;break;case"gte":h=d>=e;break;case"eq":h=d===e;break;case"neq":h=d!==e;break;default:return!1}return f[g]=kb(cb(f[g],h?0:1)),a._constrainedAway.push(g),!0}function B(a,b,c,d,e,f,g){var h=a.initial_domains,i=h[c];switch(b){case"lt":i=e?ab(i,d):$a(i,d+1);break;case"lte":i=e?ab(i,d-1):$a(i,d);break;case"gt":i=e?$a(i,d):ab(i,d-1);break;case"gte":i=e?$a(i,d+1):ab(i,d);break;case"eq":i=e?Ea(f,g):cb(i,d);break;case"neq":i=e?cb(i,d):Ea(f,g);break;default:return!1}return h[c]=kb(i),a._constrainedAway.push(c),!0}function C(a,b,c,d,e,f,g){var h=a.initial_domains,i=h[c];switch(b){case"lt":i=e?$a(i,d+1):ab(i,d);break;case"lte":i=e?$a(i,d):ab(i,d);break;case"gt":i=e?ab(i,d-1):$a(i,d);break;case"gte":i=e?ab(i,d):$a(i,d+1);break;case"eq":i=e?Ea(f,g):cb(i,d);break;case"neq":i=e?cb(i,d):Ea(f,g);break;default:return!1}return h[c]=kb(i),a._constrainedAway.push(c),!0}function D(a,b,c,d){if(1===c.length){var e=kb(Ea(a.initial_domains[d],a.initial_domains[c[0]]));if(a.initial_domains[d]=e,a.initial_domains[c[0]]=e,Xa(e))return a._constrainedAway.push(c[0],d),!0}return!1}function E(a){var b=a.all_constraints;a._propagators=[];for(var c=0,d=b.length;c<d;++c){var e=b[c];if(e.varNames){console.warn("saw constraint.varNames, converting to varIndexes, log out result and update test accordingly"),e.varIndexes=e.varNames.map(function(b){return Gd(a._var_names_trie,b)});var f=e.param;delete e.param,delete e.varNames,e.param=f}F(a,e.name,e.varIndexes,e.param,e)}}function F(a,b,c,d,e){switch(b){case"plus":return tc(a,c[0],c[1],c[2]);case"min":return uc(a,c[0],c[1],c[2]);case"ring-mul":return vc(a,c[0],c[1],c[2]);case"ring-div":return nc(a,c[0],c[1],c[2]);case"mul":return mc(a,c[0],c[1],c[2]);case"sum":return wc(a,c.slice(0),d);case"product":return xc(a,c.slice(0),d);case"distinct":return qc(a,c.slice(0));case"markov":return yc(a,c[0]);case"reifier":return hc(a,d,c[0],c[1],c[2]);case"neq":return pc(a,c[0],c[1]);case"eq":return ic(a,c[0],c[1]);case"gte":return oc(a,c[0],c[1]);case"lte":return lc(a,c[0],c[1]);case"gt":return kc(a,c[0],c[1]);case"lt":return jc(a,c[0],c[1]);default:bc("UNEXPECTED_NAME")}}function G(a){for(var b=a.varStratConfig;b;){if(b.priorityByName){for(var c={},d=b.priorityByName,e=0,f=d.length;e<f;++e){var g=Gd(a._var_names_trie,d[e]);c[g]=f-e}b._priorityByIndex=c}b=b.fallback}}function H(a,b){a._var_names_trie||(a._var_names_trie=ud(a.all_var_names)),a._front=Tb();var c=Math.ceil(a.all_var_names.length*sf*1.1);a._changedVarsTrie=ud(wf,c),a._propagationBatch=0,a._propagationCycles=0,E(a),q(a,b),r(a),G(a)}function I(a,b,c){return{_class:"$constraint",name:a,varIndexes:b,param:c}}function J(a){return ae[a]?ae[a]:void bc("distribution.get_defaults: Unknown preset: "+a)}function K(a,b,c,d){for(var e=arguments.length<=4||void 0===arguments[4]||arguments[4],f=[],g=[],h=0,i=0;i<b.length;i++){var j=b[i];if(j>0){var k=c[i];ga(a,k)&&(h+=j,g.push(h),f.push(k))}}if(0!==g.length)return 1===g.length?f[0]:L(d,h,g,f,e)}function L(a,b,c,d,e){var f=a(),g=f;e&&(g=f*b);for(var h=0;h<c.length;h++){var i=c[h];if(i>g)break}return d[h]}function M(a,b,c,d){var e=b.valueStratName,f=b.var_dist_options,g=b.all_var_names[c],h=f[g]&&f[g].valtype;return h&&(e=h),"function"==typeof e?e:N(e,a,b,c,d)}function N(a,b,c,d,e){switch(a){case"max":return Q(b,d,e);case"markov":return W(b,c,d,e);case"mid":return R(b,d,e);case"min":return P(b,d,e);case"minMaxCycle":return U(b,d,e);case"list":return O(b,c,d,e);case"naive":return gb(Ra(b.vardoms[d]));case"splitMax":return T(b,d,e);case"splitMin":return S(b,d,e);case"throw":return ASSERT(!1,"not expecting to pick this distributor")}bc("unknown next var func",a)}function O(a,b,c,d){var e=a.vardoms[c],f=b.all_var_names[c],g=b.var_dist_options,h=g[f],i=h.list,j=h.fallback_dist_name,k=i;switch("function"==typeof i&&(k=i(a,f,d)),d){case be:var l=wa(e,k);return l===lf?j?N(j,a,b,c,d):de:gb(l);case ce:var m=sa(e,k);return m===lf&&j?N(j,a,b,c,d):m}return de}function P(a,b,c){var d=a.vardoms[b];switch(c){case be:return gb(Ra(d));case ce:return Ca(d,hb(Ra(d)+1,Ta(d)))}return de}function Q(a,b,c){var d=a.vardoms[b];switch(c){case be:return gb(Ta(d));case ce:var e=Ra(d),f=Ta(d),g=hb(e,f-1);return Ca(d,g)}return de}function R(a,b,c){var d=a.vardoms[b],e=Pa(d);switch(c){case be:return gb(e);case ce:var f=Ra(d),g=Ta(d),h=ff;return e>f&&(h=ea(h,f,e-1)),e<g&&(h=ea(h,e+1,g)),Ca(d,h)}return de}function S(a,b,c){var d=a.vardoms[b],e=Ra(d),f=Ta(d),g=e+Math.floor((f-e)/2);switch(c){case be:return Ca(d,hb(e,g));case ce:return Ca(d,hb(g+1,f))}return de}function T(a,b,c){var d=a.vardoms[b],e=Ra(d),f=Ta(d),g=e+Math.floor((f-e)/2);switch(c){case be:return Ca(d,hb(g+1,f));case ce:return Ca(d,hb(e,g))}return de}function U(a,b,c){return V(b)?P(a,b,c):Q(a,b,c)}function V(a){return a%2===0}function W(a,b,c,d){var e=a.vardoms[c];switch(d){case be:var f=b.all_var_names[c],g=b.var_dist_options,h=g[f],i=h.expandVectorsWith,j=h.random||ee,k=dc(null!=i,h.legend,e),l=k.length;if(!l)return de;var m=fc(a,h.matrix,i,l),n=K(e,m,k,j);return null==n?de:(a._markov_last_value=n,gb(n));case ce:var o=a._markov_last_value,p=Ra(e),q=Ta(e),r=ff;o>p&&(r=ea(r,p,o-1)),o<q&&(r=ea(r,o+1,q));var s=Ca(e,r);return Ya(s)?de:s}return de}function X(a,b){var c=b.varStratConfig,d=Y(c.type);return Z(a,b,d,c)}function Y(a){switch(a){case"naive":return null;case"size":return $;case"min":return _;case"max":return aa;case"markov":return ba;case"list":return ca;case"throw":return bc("not expecting to pick this distributor")}return bc("unknown next var func",a)}function Z(a,b,c,d){for(var e=lf,f=b._front.buffer,g=a.frontNodeIndex,h=0,i=Wb(f,g);h<i;h++){var j=$b(f,g,h);(e===lf||c&&fe===c(a,b,j,e,d))&&(e=j)}return e}function $(a,b,c,d){var e=Na(a.vardoms[c])-Na(a.vardoms[d]);return e<0?fe:e>0?he:ge}function _(a,b,c,d){var e=Ra(a.vardoms[c])-Ra(a.vardoms[d]);return e<0?fe:e>0?he:ge}function aa(a,b,c,d){var e=Ta(a.vardoms[c])-Ta(a.vardoms[d]);return e>0?fe:e<0?he:ge}function ba(a,b,c,d,e){var f=b.var_dist_options,g=b.all_var_names[c];if(f[g]&&"markov"===f[g].valtype)return fe;var h=b.all_var_names[d];return f[h]&&"markov"===f[h].valtype?he:da(a,b,c,d,e.fallback)}function ca(a,b,c,d,e){var f=e._priorityByIndex,g=f[c],h=f[d];if(!g&&!h)return da(a,b,c,d,e.fallback);var i=e.inverted;return h?g&&g>h?i?he:fe:i?fe:he:i?he:fe}function da(a,b,c,d,e){if(!e)return ge;var f=e.type;switch(f){case"size":return $(a,b,c,d);case"min":return _(a,b,c,d);case"max":return aa(a,b,c,d);case"markov":return ba(a,b,c,d,e);case"list":return ca(a,b,c,d,e);case"throw":return bc("nope")}return bc("Unknown var dist fallback name: "+f)}function ea(a,b,c){if("number"==typeof a){if(c<=nf)return Md(a,b,c);a=mb(a)}return fa(a,b,c)}function fa(a,b,c){return a+na(b,c)}function ga(a,b){return"number"==typeof a?1===Nd(a,b):ha(a,b)}function ha(a,b){return ia(a,b)!==ef}function ia(a,b){for(var c=a.length,d=0;d<c;d+=_e){var e=la(a,d);if(!(e<=b))break;var f=la(a,d+$e);if(f>=b)return d}return ef}function ja(a){return"number"==typeof a?Rd(a):ka(a)}function ka(a){if(a.length!==_e)return lf;var b=la(a,ke),c=la(a,le);return b===c?b:lf}function la(a,b){return a.charCodeAt(b)<<16|a.charCodeAt(b+1)}function ma(a){return String.fromCharCode(a>>>16&65535,65535&a)}function na(a,b){return String.fromCharCode(a>>>16&65535,65535&a,b>>>16&65535,65535&b)}function oa(a){var b=arguments.length<=1||void 0===arguments[1]||arguments[1],c=arguments.length<=2||void 0===arguments[2]||arguments[2],d=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];if(!a.length)return ff;if(c&&(b&&(a=a.slice(0)),a.sort(function(a,b){return a-b})),!d&&a[0]>=0&&a[a.length-1]<=nf){for(var e=0,f=0;f<a.length;++f){var g=a[f];e|=Ye[g]}return e}for(var h=gf,i=void 0,j=void 0,k=0;k<a.length;k++){var l=a[k];0===k?(j=l,i=l):(l>i+1&&(h+=na(j,i),j=l),i=l)}return h+na(j,i)}function pa(a){return"number"==typeof a?qa(a):ra(a)}function qa(a){for(var b=[],c=0;c<16;++c)(a&Ye[c])>0&&b.push(c);return b}function ra(a){for(var b=[],c=0,d=a.length;c<d;c+=_e)for(var e=la(a,c),f=la(a,c+$e);e<=f;++e)b.push(e);return b}function sa(a,b){return"number"==typeof a?ta(a,b):ua(a,b)}function ta(a,b){for(var c=0;c<b.length;++c){var d=b[c];if(d<nf){var e=1<<d;if(a&e)return a^e}}return lf}function ua(a,b){var c=va(a,b);return c||ff}function va(a,b){for(var c=a.length,d=0;d<b.length;d++)for(var e=b[d],f=0;f<c;f+=_e){var g=la(a,f);if(!(g<=e))break;var h=la(a,f+$e);if(h>=e){var i=a.slice(0,f),j=a.slice(f+_e);return h===e?g===e?i+j:i+na(g,h-1)+j:g===e?i+na(g+1,h)+j:i+na(g,e-1)+na(e+1,h)+j}}return lf}function wa(a,b){return"number"==typeof a?xa(a,b):ya(a,b)}function xa(a,b){for(var c=0;c<b.length;++c){var d=b[c];if(d<=nf&&(a&1<<d)>0)return d}return lf}function ya(a,b){for(var c=0;c<b.length;c++){var d=b[c];if(ha(a,d))return d}return lf}function za(a){return a?a.length===_e?a:(a=Aa(a),a=Ba(a)):gf}function Aa(a){if(!a)return gf;var b=a.length;if(b<=_e)return a;for(var c=0,d=la(a,c),e=la(a,c+$e),f=gf,g=gf,h=_e;h<b;h+=_e){var i=la(a,h);i<d||i===d&&la(a,h+$e)<e?f+=a[h]+a[h+1]+a[h+2]+a[h+3]:g+=a[h]+a[h+1]+a[h+2]+a[h+3]}return""+Aa(f)+a[c]+a[c+1]+a[c+$e]+a[c+$e+1]+Aa(g)}function Ba(a){if(!a)return gf;var b=a.length;if(b===_e)return a;for(var c=a[ke]+a[ke+1],d=la(a,le),e=le,f=_e;f<b;f+=_e){var g=la(a,f),h=la(a,f+$e);g<=d+1?h>d&&(d=h,e=f+$e):(c+=a[e]+a[e+1]+a[f]+a[f+1],d=h,e=f+$e)}return c+a[e]+a[e+1]}function Ca(a,b){if(a===b)return a;var c="number"==typeof a,d="number"==typeof b;return c&&d?Sd(a,b):c?Da(a,b):d?Da(b,a):Ea(a,b)}function Da(a,b){for(var c=ff,d=0,e=b.length;d<e;d+=_e){var f=la(b,d);if(f>nf)break;for(var g=la(b,d+$e),h=f,i=oe(nf,g);h<=i;++h){var j=Ye[h];a&j&&(c|=j)}}return c}function Ea(a,b){var c=Fa(a,b);return rb(c)}function Fa(a,b){var c=gf,d=a.length,e=b.length;if(d+e===0)return c;for(var f=0,g=0,h=la(a,ke),i=la(a,le),j=la(b,ke),k=la(b,le);;)if(i<j){if(f+=_e,f>=d)break;h=la(a,f),i=la(a,f+$e)}else if(k<h){if(g+=_e,g>=e)break;j=la(b,g),k=la(b,g+$e)}else{var l=oe(i,k);if(c+=na(pe(h,j),l),l+=2,h=j=l,i<l){if(f+=_e,f>=d)break;h=la(a,f),i=la(a,f+$e)}if(k<l){if(g+=_e,g>=e)break;j=la(b,g),k=la(b,g+$e)}}return c}function Ga(a,b){if(a&&b){var c=void 0;do{if(c=0,a.length>_e){var d=Ia(b),e=Ha(a,d);c+=a.length-e.length,a=e}if(b.length>_e){var f=Ia(a),g=Ha(b,f);c+=b.length-g.length,b=g}}while(0!==c)}return[a,b]}function Ha(a,b){for(var c=a[ke]+a[ke+1],d=la(a,le),e=le,f=_e,g=a.length;f<g;f+=_e){var h=la(a,f),i=la(a,f+$e);h-d>b&&(c+=a[e]+a[e+1]+a[f]+a[f+1]),d=i,e=f+$e}return c+=a[e]+a[e+1]}function Ia(a){for(var b=df,c=0,d=a.length;c<d;c+=_e){var e=la(a,c),f=la(a,c+$e),g=1+f-e;g<b&&(b=g)}return b}function Ja(a,b){return"number"==typeof a&&(a=mb(a)),"number"==typeof b&&(b=mb(b)),Ka(a,b)}function Ka(a,b){for(var c=gf,d=0,e=a.length;d<e;d+=_e)for(var f=la(a,d),g=la(a,d+$e),h=0,i=b.length;h<i;h+=_e){var j=la(b,h),k=la(b,h+$e);c+=na(oe(df,f*j),oe(df,g*k))}return rb(za(c))}function La(a,b){var c=arguments.length<=2||void 0===arguments[2]||arguments[2];return"number"==typeof a&&(a=mb(a)),"number"==typeof b&&(b=mb(b)),Ma(a,b,c)}function Ma(a,b){for(var c=arguments.length<=2||void 0===arguments[2]||arguments[2],d=gf,e=0,f=a.length;e<f;e+=_e)for(var g=la(a,e),h=la(a,e+$e),i=0,j=b.length;i<j;i+=_e){var k=la(b,i),l=la(b,i+$e);if(l>0){var m=g/l,n=k>0?h/k:df,o=re(pe(0,m)),p=qe(n);o<=p?d+=na(o,p):c&&(d+=na(p,p))}}return rb(za(d))}function Na(a){return"number"==typeof a?_d(a):Oa(a)}function Oa(a){for(var b=0,c=0,d=a.length;c<d;c+=_e)b+=1+la(a,c+$e)-la(a,c);return b}function Pa(a){return"number"==typeof a&&(a=mb(a)),Qa(a)}function Qa(a){if(!a)return lf;for(var b=Oa(a),c=qe(b/2),d=void 0,e=void 0,f=0,g=a.length;f<g;f+=_e){d=la(a,f),e=la(a,f+$e);var h=1+e-d;if(c<h)break;c-=h}return d+c}function Ra(a){return"number"==typeof a?Wd(a):Sa(a)}function Sa(a){return a?la(a,ke):lf}function Ta(a){return"number"==typeof a?Vd(a):Ua(a)}function Ua(a){return a?la(a,a.length-$e):lf}function Va(a){var b=a.length;return 0===b?lf:a[b-1]}function Wa(a){return"number"==typeof a?1===Td(a):Xa(a)}function Xa(a){return a.length===_e&&la(a,ke)===la(a,le)}function Ya(a){return"string"==typeof a?a===gf:"number"==typeof a?a===ff:0===a.length}function Za(a,b){return"number"==typeof a?Xd(a,b):$a(a,b)}function $a(a,b){for(var c=0,d=a.length;c<d;c+=_e){var e=la(a,c),f=la(a,c+$e);if(e>b){var g=a.slice(0,c);return rb(g)}if(e===b){var h=a.slice(0,c);return rb(h)}if(b<=f){var i=a.slice(0,c+$e)+ma(b-1);return b-1<=nf?sb(i,c+_e):i}}return a}function _a(a,b){return"number"==typeof a?Yd(a,b):ab(a,b)}function ab(a,b){for(var c=0,d=a.length;c<d;c+=_e){var e=la(a,c),f=la(a,c+$e);if(e>b){if(!c)return a;var g=a.slice(c);return rb(g)}if(f===b){var h=a.slice(c+_e);return rb(h)}if(b<=f){var i=ma(b+1)+a.slice(c+$e);return rb(i)}}return ff}function bb(a,b){return"number"==typeof a?Zd(a,b):cb(a,b)}function cb(a,b){for(var c=0,d=a.length;c<d;c+=_e){var e=la(a,c),f=la(a,c+$e);if(b===e){var g=a.slice(0,c);return b!==f&&(g+=na(b+1,f)),rb(g+a.slice(c+_e))}if(b===f){var h=a.slice(0,c)+na(e,b-1)+a.slice(c+_e);return rb(h)}if(b<e)return a;if(b<f){var i=a.slice(0,c)+na(e,b-1)+na(b+1,f)+a.slice(c+_e);return rb(i)}}return a}function db(a,b){var c="number"==typeof a,d="number"==typeof b;return c&&d?1===$d(a,b):c?eb(a,b):d?eb(b,a):fb(a,b)}function eb(a,b){for(var c=0,d=b.length,e=0;e<=nf;++e)if(a&1<<e){for(;c<d;){var f=la(b,c),g=la(b,c+$e);if(e>=f&&e<=g)return!1;if(f>nf)return!0;if(f>e)break;c+=_e}if(c>=d)return!0}return!0}function fb(a,b){for(var c=a.length,d=b.length,e=0,f=0,g=la(a,ke),h=la(a,le),i=la(b,ke),j=la(b,le);;)if(h<i){if(e+=_e,e>=c)break;g=la(a,e),h=la(a,e+$e)}else{if(!(j<g))return!1;if(f+=_e,f>=d)break;i=la(b,f),j=la(b,f+$e)}return!0}function gb(a){return a<=nf?Pd(a):na(a,a)}function hb(a,b){return b<=nf?Od(a,b):na(a,b)}function ib(a,b){return b===ie?jb(a,!0):b===je?kb(a):a}function jb(a,b){return"number"==typeof a?lb(a):"string"==typeof a?nb(a):b?a.slice(0):a}function kb(a){return"number"==typeof a?mb(a):"string"==typeof a?a:pb(a)}function lb(a){if(a===ff)return[];var b=[],c=-1,d=-1;if(se&a&&(c=0,d=0),te&a&&(0!==c&&(c=1),d=1),ve&a&&(0===d?(b.push(0,0),c=2):1!==d&&(c=2),d=2),we&a&&(d<0?c=3:2!==d&&(b.push(c,d),c=3),d=3),a>=xe)for(var e=4;e<=nf;++e)Ye[e]&a&&(d<0?c=e:d!==e-1&&(b.push(c,d),c=e),d=e);return b.push(c,d),b}function mb(a){if(a===ff)return gf;var b=gf,c=-1,d=-1;if(se&a&&(c=0,d=0),te&a&&(0!==c&&(c=1),d=1),ve&a&&(0===d?(b=na(0,0),c=2):1!==d&&(c=2),d=2),we&a&&(d<0?c=3:2!==d&&(b+=na(c,d),c=3),d=3),a>=xe)for(var e=4;e<=nf;++e)Ye[e]&a&&(d<0?c=e:d!==e-1&&(b+=na(c,d),c=e),d=e);return b+=na(c,d)}function nb(a){if(a===ff)return[];for(var b=[],c=0,d=a.length;c<d;c+=_e){var e=la(a,c),f=la(a,c+$e);b.push(e,f)}return b}function ob(a){var b=a.length;if(0===b)return ff;var c=Va(a);return c<=nf?qb(a,b):pb(a)}function pb(a){for(var b=gf,c=0,d=a.length;c<d;c+=mf){var e=a[c],f=a[c+1];b+=na(e,f)}return b}function qb(a,b){for(var c=0,d=0;d<b;d+=mf)c=Md(c,a[d],a[d+1]);return c}function rb(a){if("number"==typeof a)return a;var b=a.length;return 0===b?ff:"string"==typeof a?Ua(a)<=nf?sb(a,b):a:ob(a)}function sb(a,b){for(var c=ff,d=0;d<b;d+=_e){var e=la(a,d),f=la(a,d+$e);c=Md(c,e,f)}return c}function tb(a){var b=ub(a);if(b){var c=wb(a);c||(console&&console.warn&&console.warn(b,a,"unable to fix"),bc("Fatal: unable to fix domain: "+JSON.stringify(a))),a=c}return a}function ub(a){for(var b=0;b<a.length;b+=mf){var c=a[b],d=a[b+1],e=vb(c);if(e)return e;var f=vb(d);if(f)return f;if(c<cf)return"Domain contains a number lower than SUB ("+c+" < "+cf+"), this is probably a bug";if(d>df)return"Domain contains a number higher than SUP ("+d+" > "+df+"), this is probably a bug";if(c>d)return"Found a lo/hi pair where lo>hi, expecting all pairs lo<=hi ("+c+">"+d+")"}}function vb(a){return"number"!=typeof a?a instanceof Array?"Detected legacy domains (arrays of arrays), expecting flat array of lo-hi pairs":"Expecting array of numbers, found something else (#{n}), this is probably a bug":isNaN(a)?"Domain contains an actual NaN, this is probably a bug":void 0}function wb(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];if(!(d instanceof Array))return;if(d.length!==mf)return;var e=d[me],f=d[ne];if(e>f)return;b.push(e,f)}return b}function xb(a,b){if(!a)return ff;if(!b)return ff;if(0===Ra(a)&&0===Ra(b))return hb(0,Ta(a));var c="number"==typeof a,d="number"==typeof b;if(c)return d?zb(a,b):Ab(a,b);var e=void 0;return e=d?Cb(a,b):yb(a,b),rb(za(e))}function yb(a,b){var c=Ga(a,b);a=c[0],b=c[1];for(var d=gf,e=0,f=a.length;e<f;e+=_e){var g=la(a,e),h=la(a,e+$e);d+=Eb(g,h,b)}return d}function zb(a,b){if(a&se&&b&se)return Qd(a);for(var c=0;0===(a&1<<c);)++c;for(var d=c,e=c,f=1<<++c,g=ff;f<=a&&c<=nf;)(f&a)>0&&(e!==c-1&&(g|=Bb(d,e,b),d=c),e=c),f=1<<++c;return g|Bb(d,e,b)}function Ab(a,b){if(a&se&&0===Ra(b))return Qd(a);for(var c=0;0===(a&1<<c);)++c;for(var d=c,e=c,f=1<<++c,g=ff;f<=a&&c<=nf;)(f&a)>0&&(e!==c-1&&(g|=Fb(d,e,b),d=c),e=c),f=1<<++c;return g|Fb(d,e,b)}function Bb(a,b,c){for(var d=0;0===(c&1<<d);)++d;for(var e=d,f=d,g=1<<++d,h=ff;g<=c&&d<=nf;)(g&c)>0&&(f!==d-1&&(h|=Hb(a,b,e,f),e=d),f=d),g=1<<++d;return h|Hb(a,b,e,f)}function Cb(a,b){if(0===Ra(a)&&0===Ra(b))return hb(0,Ta(a));for(var c=gf,d=0,e=a.length;d<e;d+=_e){var f=la(a,d),g=la(a,d+$e);c+=Db(f,g,b)}return c}function Db(a,b,c){if(c===ff)return ff;for(var d=0;0===(c&1<<d);)++d;for(var e=d,f=d,g=1<<++d,h=gf;g<=c&&d<=nf;)(g&c)>0&&(f!==d-1&&(h+=Gb(a,b,e,f),e=d),f=d),g=1<<++d;return h+Gb(a,b,e,f)}function Eb(a,b,c){for(var d=gf,e=0,f=c.length;e<f;e+=_e){var g=la(c,e),h=la(c,e+$e);d+=Gb(a,b,g,h)}return d}function Fb(a,b,c){for(var d=ff,e=0,f=c.length;e<f;e+=_e){var g=la(c,e),h=la(c,e+$e);d|=Hb(a,b,g,h)}return d}function Gb(a,b,c,d){var e=b-c;if(e>=cf){var f=pe(cf,a-d);return na(f,e)}return gf}function Hb(a,b,c,d){var e=b-c;if(e>=cf){var f=pe(cf,a-d);return Od(f,e)}return ff}function Ib(a,b){if(!a)return ff;if(!b)return ff;var c="number"==typeof a,d="number"==typeof b,e=void 0;if(c&&d){if(Kb(a,b))return Mb(a,b);e=Lb(a,b)}else e=c?Ob(a,b):d?Ob(b,a):Jb(a,b);return rb(za(e))}function Jb(a,b){var c=Ga(a,b);a=c[0],b=c[1];for(var d=gf,e=0,f=a.length;e<f;e+=_e){var g=la(a,e),h=la(a,e+$e);d+=Qb(g,h,b)}return d}function Kb(a,b){return a<Ce&&b<Be||Ta(a)+Ta(b)<=nf}function Lb(a,b){for(var c=0;0===(a&1<<c);)++c;for(var d=c,e=c,f=1<<++c,g=gf;f<=a&&c<=nf;)(f&a)>0&&(e!==c-1&&(g+=Pb(d,e,b),d=c),e=c),f=1<<++c;return g+Pb(d,e,b)}function Mb(a,b){for(var c=0;0===(a&1<<c);)++c;for(var d=c,e=c,f=1<<++c,g=ff;f<=a&&c<=nf;)(f&a)>0&&(e!==c-1&&(g|=Nb(d,e,b),d=c),e=c),f=1<<++c;return g|Nb(d,e,b)}function Nb(a,b,c){for(var d=0;0===(c&1<<d);)++d;for(var e=d,f=d,g=1<<++d,h=ff;g<=c&&d<=nf;)(g&c)>0&&(f!==d-1&&(h|=Sb(a,b,e,f),e=d),f=d),g=1<<++d;return h|Sb(a,b,e,f)}function Ob(a,b){for(var c=0;0===(a&1<<c);)++c;for(var d=c,e=c,f=1<<++c,g=gf;f<=a&&c<=nf;)(f&a)>0&&(e!==c-1&&(g+=Qb(d,e,b),d=c),e=c),f=1<<++c;return g+Qb(d,e,b)}function Pb(a,b,c){for(var d=0;0===(c&1<<d);)++d;for(var e=d,f=d,g=1<<++d,h=gf;g<=c&&d<=nf;)(g&c)>0&&(f!==d-1&&(h+=Rb(a,b,e,f),e=d),f=d),g=1<<++d;return h+Rb(a,b,e,f)}function Qb(a,b,c){for(var d=gf,e=0,f=c.length;e<f;e+=_e){var g=la(c,e),h=la(c,e+$e);d+=Rb(a,b,g,h)}return d}function Rb(a,b,c,d){var e=a+c;if(e<=df){var f=oe(df,b+d);return na(e,f)}return gf}function Sb(a,b,c,d){return Od(a+c,b+d)}function Tb(a){var b={_class:"$front",lastNodeIndex:0,buffer:new Uint16Array(a||af)};return b}function Ub(a){var b=a.lastNodeIndex,c=a.buffer[b];c||b===bf||bc("E_LAST_NODE_EMPTY");var d=b+1+c;a.lastNodeIndex=d;var e=a.buffer,f=e.length,g=d+1+c;
return g>=f&&Vb(a,Math.floor(Math.max(g,f+1,1.1*f))),d}function Vb(a,b){var c=a.buffer;a.buffer=new Uint16Array(b),a.buffer.set(c)}function Wb(a,b){return a[b]}function Xb(a,b,c){return Yb(a.buffer,b,c)}function Yb(a,b,c){a[b]=c}function Zb(a,b,c,d){var e=a.buffer.length,f=b+1+c;b===bf&&f>=e&&Vb(a,Math.floor(Math.max(f+1,1.1*e))),a.buffer[f]=d}function $b(a,b,c){return a[b+1+c]}function _b(a){return void 0!==a.id&&null!==a.id?a.id:a}function ac(a){if("string"==typeof a)return a;for(var b=[],c=0;c<a.length;c++){var d=a[c];b.push(_b(d))}return b}function bc(a){throw new Error(a)}function cc(a,b){for(var c=a.vardoms,d=0;d<b.length;d++){var e=b[d],f=c[e.booleanId];if(void 0===f||1===Ud(f,1))break}return e}function dc(a,b,c){return a?ec(b,c):b}function ec(a,b){var c=void 0;c=a?a.slice(0):[];for(var d=pa(b),e=0;e<d.length;++e){var f=d[e];c.indexOf(f)<0&&c.push(f)}return c}function fc(a,b,c,d){var e=cc(a,b),f=e.vector;if(null!=c){f=f?f.slice(0):[];var g=d-f.length;if(g>0)for(var h=0;h<g;++h)f.push(c);return f}return f&&f.length===d||bc("E_EACH_MARKOV_VAR_MUST_HAVE_PROB_VECTOR_OR_ENABLE_EXPAND_VECTORS"),f}function gc(a,b,c,d,e,f,g,h,i,j,k){return{_class:"$propagator",name:a,stepper:b,index1:void 0===c?-1:c,index2:void 0===d?-1:d,index3:void 0===e?-1:e,arg1:void 0===f?"":f,arg2:void 0===g?"":g,arg3:void 0===h?"":h,arg4:void 0===i?"":i,arg5:void 0===j?"":j,arg6:void 0===k?"":k}}function hc(a,b,c,d,e){var f=void 0,g=void 0,h=void 0,i=void 0,j=void 0;switch(b){case"eq":g=Bc,i=Cc,f="neq",h=Qc,j=Rc;var k=rb(a.initial_domains[c]),l=rb(a.initial_domains[d]),m=rb(a.initial_domains[e]);if(m===ue){if(l===ue){if(k===te)return ic(a,d,e);if(k===se)return pc(a,d,e)}if(k===ue){if(l===te)return ic(a,c,e);if(l===se)return pc(a,c,e)}}break;case"neq":g=Qc,i=Rc,f="eq",h=Bc,j=Cc;var n=rb(a.initial_domains[c]),o=rb(a.initial_domains[d]),q=rb(a.initial_domains[e]);if(q===ue){if(o===ue){if(n===te)return pc(a,d,e);if(n===se)return ic(a,d,e)}if(n===ue){if(o===te)return pc(a,c,e);if(o===se)return ic(a,c,e)}}break;case"lt":g=Qc,i=Fc,f="gte",h=Ic,j=Kc;break;case"gt":g=Ec,i=Gc,f="lte",h=Hc,j=Jc;break;case"lte":g=Hc,i=Jc,f="gt",h=Ec,j=Gc;break;case"gte":g=Ic,i=Kc,f="lt",h=Dc,j=Fc;break;default:bc("UNKNOWN_REIFIED_OP")}p(a,gc("reified",Sc,c,d,e,g,h,b,f,i,j))}function ic(a,b,c){p(a,gc("eq",Bc,b,c))}function jc(a,b,c){p(a,gc("lt",Dc,b,c))}function kc(a,b,c){jc(a,c,b)}function lc(a,b,c){p(a,gc("lte",Hc,b,c))}function mc(a,b,c,d){p(a,gc("mul",Oc,b,c,d))}function nc(a,b,c,d){p(a,gc("div",zc,b,c,d))}function oc(a,b,c){lc(a,c,b)}function pc(a,b,c){p(a,gc("neq",Qc,b,c))}function qc(a,b){for(var c=0;c<b.length;c++)for(var d=b[c],e=0;e<c;++e)pc(a,d,b[e])}function rc(a,b,c,d,e,f,g,h){sc(a,f,g,h,b,d),sc(a,h,g,f,c,e),sc(a,h,f,g,c,e)}function sc(a,b,c,d,e,f){p(a,gc("ring",Tc,b,c,d,e,f))}function tc(a,b,c,d){rc(a,"plus","min",Ib,xb,b,c,d)}function uc(a,b,c,d){p(a,gc("min",Mc,b,c,d))}function vc(a,b,c,d){rc(a,"mul","div",Ja,La,b,c,d)}function wc(a,b,c){var e=b.length;switch(e){case 0:return void bc("SUM_REQUIRES_VARS");case 1:return void ic(a,c,b[0]);case 2:return void tc(a,b[0],b[1],c)}var f=void 0,g=Math.floor(b.length/2);g>1?(f=d(a),wc(a,b.slice(0,g),f)):f=b[0];var h=d(a);wc(a,b.slice(g),h),tc(a,f,h,c)}function xc(a,b,c){switch(b.length){case 0:return void bc("PRODUCT_REQUIRES_VARS");case 1:return void ic(a,c,b[0]);case 2:return void vc(a,b[0],b[1],c)}var e=Math.floor(b.length/2),f=void 0;e>1?(f=d(a),xc(a,b.slice(0,e),f)):f=b[0];var g=d(a);xc(a,b.slice(e),g),vc(a,f,g,c)}function yc(a,b){p(a,gc("markov",Lc,b))}function zc(a,b,c,d,e){var f=a.vardoms[c],g=a.vardoms[d],h=a.vardoms[e];a.vardoms[e]=Ac(f,g,h)}function Ac(a,b,c){var d=La(a,b);return Ca(c,d)}function Bc(a,b,c,d){var e=a.vardoms[c],f=a.vardoms[d],g=Ca(e,f);a.vardoms[c]=g,a.vardoms[d]=g}function Cc(a,b){return db(a,b)}function Dc(a,b,c,d){var e=a.vardoms[c],f=a.vardoms[d],g=Ra(e),h=Ta(e),i=Ra(f),j=Ta(f);h>=j&&(a.vardoms[c]=Za(e,j)),g>=i&&(a.vardoms[d]=_a(f,g))}function Ec(a,b,c,d){return Dc(a,b,d,c)}function Fc(a,b){return Ra(a)>=Ta(b)}function Gc(a,b){return Fc(b,a)}function Hc(a,b,c,d){var e=a.vardoms[c],f=a.vardoms[d],g=Ra(e),h=Ta(e),i=Ra(f),j=Ta(f);h>j&&(a.vardoms[c]=Za(e,j+1)),g>i&&(a.vardoms[d]=_a(f,g-1))}function Ic(a,b,c,d){return Hc(a,b,d,c)}function Jc(a,b){return Ra(a)>Ta(b)}function Kc(a,b){return Jc(b,a)}function Lc(a,b,c){var d=a.vardoms[c];if(Wa(d)){var e=Ra(d),f=b.var_dist_options,g=f[b.all_var_names[c]],h=g.expandVectorsWith,i=dc(null!=h,g.legend,d),j=fc(a,g.matrix,h,i.length),k=i.indexOf(e);(k<0||k>=j.length||0===j[k])&&(a.vardoms[c]=ff)}}function Mc(a,b,c,d,e){var f=a.vardoms[c],g=a.vardoms[d],h=a.vardoms[e];a.vardoms[e]=Nc(f,g,h)}function Nc(a,b,c){var d=xb(a,b);return Ca(c,d)}function Oc(a,b,c,d,e){var f=a.vardoms[c],g=a.vardoms[d],h=a.vardoms[e];a.vardoms[e]=Pc(f,g,h)}function Pc(a,b,c){var d=Ja(a,b);return Ca(c,d)}function Qc(a,b,c,d){var e=a.vardoms[c],f=a.vardoms[d],g=ja(e);g!==lf?e===f?(a.vardoms[c]=ff,a.vardoms[d]=ff):a.vardoms[d]=bb(f,g):(g=ja(f),g!==lf&&(a.vardoms[c]=bb(e,g)))}function Rc(a,b){return!(!Wa(a)||!Wa(b))&&ja(a)===ja(b)}function Sc(a,b,c,d,e,f,g,h,i,j,k){var l=a.vardoms,m=l[e];if(m===se)g(a,b,c,d);else if(m===te)f(a,b,c,d);else{var n=l[c],o=l[d],p=j(n,o),q=k(n,o);q?p?l[e]=ff:(l[e]=te,f(a,b,c,d)):p&&(l[e]=se,g(a,b,c,d))}}function Tc(a,b,c,d,e,f,g){var h=a.vardoms[c],i=a.vardoms[d],j=a.vardoms[e];a.vardoms[e]=Uc(h,i,j,g,f)}function Uc(a,b,c,d,e){var f=d(a,b);return Ca(c,f)}function Vc(a,b){var c=!a.stack||0===a.stack.length;c&&(a.stack?a.stack.push(a.space):a.stack=[a.space]);for(var d=a.stack;d.length>0;){var e=Wc(d[d.length-1],b,d,a);if(e)return}a.status="end",a.more=!1}function Wc(a,b,c,d){b._front.lastNodeIndex=a.frontNodeIndex;var e=kd(a,b);if(e)return Yc(d,a,c),!1;var f=rd(a,b);if(f)return Zc(d,a,c),!0;var g=Xc(a,b);return g?c.push(g):(a.stable_children++,c.pop()),!1}function Xc(a,b){var c=X(a,b);if(c!==lf){var d=a.vardoms[c];if(!Wa(d)){var e=a.next_distribution_choice++,f=M(a,b,c,e);if(f){var g=fd(a);return g.updatedVarIndex=c,g.vardoms[c]=f,g}}}}function Yc(a,b,c){b.failed=!0,c.pop()}function Zc(a,b,c){c.pop(),a.status="solved",a.space=b,a.more=c.length>0}function $c(a){switch("undefined"==typeof a?"undefined":_typeof(a)){case"object":if(!a)return null;if(a instanceof Array)return a.map(function(a){return $c(a)});var b={};for(var c in a)b[c]=$c(a[c]);return b;case"function":var d={__THIS_IS_A_FUNCTION:1,__source:a.toString()};for(var e in a)d[e]=$c(a[e]);return d;case"string":case"number":case"boolean":case"undefined":return a}bc("config value what?",a)}function _c(){return pf||(pf="function"==typeof require?function(a){return require("util").inspect(a,!1,null)}:function(a){return a}),pf}function ad(a,b,c){for(var d=[];a.more&&d.length<c;)Vc(a,b),"end"!==a.status&&d.push(a.space);return d}function bd(a,b,c){var d=b.distributeOptions;d&&(b.distribute&&(d.valtype=b.distribute),n(c,"varStratOverride",d,a),"markov"===d.valtype&&t(c,"markov",[a]))}function cd(a,b,c,d){d>=jf&&console.time("      - FD Solution Construction Time");for(var e=0;e<a.length;++e){var f=sd(a[e],b);c.push(f),d>=kf&&(console.log("      - FD solution() ::::::::::::::::::::::::::::"),console.log(JSON.stringify(f)),console.log("                      ::::::::::::::::::::::::::::"))}d>=jf&&console.timeEnd("      - FD Solution Construction Time")}function dd(){var a=0,b=0,c="";return hd([],0,a,b,c)}function ed(a){var b=dd();return id(b,a),b}function fd(a){var b=a.vardoms.slice(0),c=a.frontNodeIndex,d=void 0,e=void 0,f=void 0;return hd(b,c,d,e,f)}function gd(a,b){for(var d=a.vardoms,e=[],f=b.all_var_names,g=0,h=f.length;g<h;g++){var i=d[g];e[g]=ib(i,je)}return c(b,e)}function hd(a,b,c,d,e){var f={_class:"$space",vardoms:a,frontNodeIndex:b,next_distribution_choice:0,updatedVarIndex:-1};return f}function id(a,b){H(b,a),jd(a,b)}function jd(a,b){var c=b.targetedVars,d=a.vardoms,e=b._front,f=a.frontNodeIndex,g=0;if("all"===c)for(var h=0,i=d.length;h<i;++h)Wa(d[h])||(b._varToPropagators[h]||b._constrainedAway&&b._constrainedAway.indexOf(h)>=0)&&Zb(e,f,g++,h);else for(var j=b._var_names_trie,k=0,l=c.length;k<l;++k){var m=c[k],n=Gd(j,m);n===vf&&bc("E_TARGETED_VARS_SHOULD_EXIST_NOW"),Wa(d[n])||Zb(e,f,g++,n)}Xb(e,f,g)}function kd(a,b){var c=b._propagators,d=b._propagationCycles,e=b._changedVarsTrie,f=[],g=1;if(a.updatedVarIndex>=0)f.push(a.updatedVarIndex);else{var h=ld(a,b,c,f,e,++d);if(h)return b._propagationCycles=d,!0}if(qd(a,b))return b._propagationCycles=d,!0;for(var i=!1;f.length;){var j=[],k=pd(a,b,c,g,f,j,e,++d);if(k){i=!0;break}if(qd(a,b)){i=!0;break}f=j,g=2}return b._propagationCycles=d,i}function ld(a,b,c,d,e,f){for(var g=0,h=c.length;g<h;g++){var i=c[g],j=nd(a,b,i,d,e,f);if(j)return!0}return!1}function md(a,b,c,d,e,f,g){for(var h=0,i=d.length;h<i;h++){var j=d[h],k=c[j],l=nd(a,b,k,e,f,g);if(l)return!0}return!1}function nd(a,b,c,d,e,f){var g=a.vardoms,h=c.index1,i=c.index2,j=c.index3,k=g[h],l=void 0!==i&&g[i],m=void 0!==j&&g[j],n=c.stepper;if(n(a,b,h,i,j,c.arg1,c.arg2,c.arg3,c.arg4,c.arg5,c.arg6),k!==g[h]){if(g[h]===ff)return!0;od(h,e,d,f)}if(void 0!==i&&l!==g[i]){if(g[i]===ff)return!0;od(i,e,d,f)}if(void 0!==j&&m!==g[j]){if(g[j]===ff)return!0;od(j,e,d,f)}return!1}function od(a,b,c,d){if("number"==typeof a){var e=Jd(b,a);e!==d&&(c.push(a),Cd(b,a,d))}else for(var f=0,g=a.length;f<g;++f)od(a[f],b,c,d)}function pd(a,b,c,d,e,f,g,h){for(var i=b._varToPropagators,j=0,k=e.length;j<k;j++){var l=i[e[j]];if(l&&l.length>=d){var m=md(a,b,c,l,f,g,h);if(m)return!0}}return!1}function qd(a,b){var c=b.timeout_callback;return!!c&&c(a)}function rd(a,b){var c=a.vardoms,d=b._front,e=d.lastNodeIndex,f=Ub(d);a.frontNodeIndex=f;for(var g=0,h=0,i=Wb(d.buffer,e);h<i;h++){var j=$b(d.buffer,e,h),k=c[j];Wa(k)||Zb(d,f,g++,j)}return Xb(d,f,g),0===g}function sd(a,b){for(var c=b.all_var_names,d={},e=0,f=c.length;e<f;e++){var g=c[e];d[g]=td(a,e)}return d}function td(a,b){var c=a.vardoms[b];if(c===ff)return!1;var d=ja(c);return d!==lf?d:jb(c)}function ud(a,b,c){var d=0|b||tf;d||bc("fixme");var e=Math.max(zd(d),0|c),f=vd(d,e),g={_class:"$trie",buffer:f,bits:e,lastNode:qf,count:0,_mallocs:""+f.length,_adds:0,_addSteps:0,_hass:0,_gets:0,_getSteps:0};if(a)for(var h=0,i=a.length;h<i;++h)Ad(g,a[h],h);return g}function vd(a,b){switch(b){case xf:return new Uint8Array(a);case 16:return new Uint16Array(a);case zf:return new Uint32Array(a);case Af:return new Float64Array(a)}bc("Unsupported bit size")}function wd(a){var b=a.lastNode+sf;for(a.lastNode=b;b+sf>=a.buffer.length;)xd(a);return b}function xd(a){var b=a.buffer.length,c=~~(1.1*b);b+uf>c&&(c=uf+b),yd(a,c)}function yd(a,b){var c=zd(b);a.bits=Math.max(a.bits,c);var d=vd(b,a.bits);d.set(a.buffer,0),a.buffer=d}function zd(a){return a<256?xf:a<65536?yf:a<4294967296?zf:Af}function Ad(a,b,c){return Ed(a,c),Bd(a,qf,b,0,b.length,c)}function Bd(a,b,c,d,e,f){if(d>=e){var g=a.buffer,h=b+rf,i=a.buffer[h];return i||++a.count,g[h]=f+1,i-1}var j=c.charCodeAt(d)-32;return b=Fd(a,b,j%10),b=Fd(a,b,Math.floor(j/10)),Bd(a,b,c,d+1,e,f)}function Cd(a,b,c){return Ed(a,c),Dd(a,qf,b+1,c)}function Dd(a,b,c,d){if(0===c){var e=a.buffer,f=b+rf,g=a.buffer[f];return g||++a.count,e[f]=d+1,g-1}return b=Fd(a,b,c%10),c=Math.floor(c/10),Dd(a,b,c,d)}function Ed(a,b){var c=zd(b);c>a.bits&&(a.bits=c,yd(a,a.buffer.length))}function Fd(a,b,c){b+=c;var d=a.buffer[b];return d||(d=wd(a),a.buffer[b]=d),d}function Gd(a,b){return Hd(a,qf,b,0,b.length)}function Hd(a,b,c,d,e){var f=a.buffer;if(d>=e){var g=b+rf;return f[g]-1}var h=c.charCodeAt(d)-32;return(b=f[b+h%10])?(b=f[b+Math.floor(h/10)],b?Hd(a,b,c,d+1,e):vf):vf}function Id(a,b){return Gd(a,b)!==vf}function Jd(a,b){return Kd(a,qf,b+1)}function Kd(a,b,c){var d=a.buffer;if(0===c){var e=b+rf;return d[e]-1}return(b=d[b+c%10])?(c=Math.floor(c/10),Kd(a,b,c)):vf}var Ld=a(),Md=Ld.addRange,Nd=Ld.containsValue,Od=Ld.createRange,Pd=Ld.createValue,Qd=Ld.createRangeZeroToMax,Rd=Ld.getValue,Sd=Ld.intersection,Td=Ld.isSolved,Ud=(Ld.isUndetermined,Ld.isValue),Vd=Ld.max,Wd=Ld.min,Xd=Ld.removeGte,Yd=Ld.removeLte,Zd=Ld.removeValue,$d=Ld.sharesNoElements,_d=Ld.size,ae={defaults:{varStrategy:{type:"naive"},valueStrategy:"min"},naive:{varStrategy:{type:"naive"},valueStrategy:"min"},fail_first:{varStrategy:{type:"size"},valueStrategy:"min"},split:{varStrategy:{type:"size"},valueStrategy:"splitMin"}},be=0,ce=1,de=void 0,ee=Math.random,fe=1,ge=2,he=3,ie=1,je=2,ke=0,le=2,me=0,ne=1,oe=Math.min,pe=Math.max,qe=Math.floor,re=Math.ceil,se=1,te=2,ue=se|te,ve=4,we=8,xe=16,ye=32,ze=64,Ae=128,Be=256,Ce=512,De=1024,Ee=2048,Fe=4096,Ge=8192,He=16384,Ie=32768,Je=65536,Ke=1<<17,Le=1<<18,Me=1<<19,Ne=1<<20,Oe=1<<21,Pe=1<<22,Qe=1<<23,Re=1<<24,Se=1<<25,Te=1<<26,Ue=1<<27,Ve=1<<28,We=1<<29,Xe=1<<30,Ye=[se,te,ve,we,xe,ye,ze,Ae,Be,Ce,De,Ee,Fe,Ge,He,Ie,Je,Ke,Le,Me,Ne,Oe,Pe,Qe,Re,Se,Te,Ue,Ve,We,Xe],Ze={};Ze[se]=0,Ze[te]=1,Ze[ve]=2,Ze[we]=3,Ze[xe]=4,Ze[ye]=5,Ze[ze]=6,Ze[Ae]=7,Ze[Be]=8,Ze[Ce]=9,Ze[De]=10,Ze[Ee]=11,Ze[Fe]=12,Ze[Ge]=13,Ze[He]=14,Ze[Ie]=15,Ze[Je]=16,Ze[Ke]=17,Ze[Le]=18,Ze[Me]=19,Ze[Ne]=20,Ze[Oe]=21,Ze[Pe]=22,Ze[Qe]=23,Ze[Re]=24,Ze[Se]=25,Ze[Te]=26,Ze[Ue]=27,Ze[Ve]=28,Ze[We]=29,Ze[Xe]=30;var $e=2,_e=4,af=100,bf=0,cf=0,df=1e8,ef=-1,ff=0,gf="",hf=0,jf=1,kf=2,lf=Math.min(0,cf)-1,mf=2,nf=30,of=function(){function a(){var c=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];_classCallCheck(this,a),this._class="solver",this.distribute=c.distribute||"naive";var d=c.config||b();if(this.config=d,d.initial_domains)for(var e=d.initial_domains,f=0,g=e.length;f<g;++f)e[f]instanceof Array&&(e[f]=pb(e[f]));d._propagators&&(d._propagators=void 0),d._varToPropagators&&(d._varToPropagators=void 0),this.defaultDomain=c.defaultDomain||hb(0,1),this.vars={byId:{},byName:{},all:[],byClass:{},root:void 0},this.solutions=[],this.state={space:null,more:!1},this._prepared=!1}return _createClass(a,[{key:"constant",value:function(a){return a===!1&&(a=0),a===!0&&(a=1),this.num(a)}},{key:"num",value:function(a){"number"!=typeof a&&bc("Solver#num: expecting a number, got "+a+" (a "+("undefined"==typeof a?"undefined":_typeof(a))+")"),isNaN(a)&&bc("Solver#num: expecting a number, got NaN");var b=i(this.config,a);return this.config.all_var_names[b]}},{key:"addVars",value:function(a){for(var b=0;b<a.length;b++){var c=a[b];this.addVar(c)}}},{key:"decl",value:function(a,b){var c=void 0;c="number"==typeof b?[b,b]:b,c||(c=ib(this.defaultDomain,ie)),Ya(c)&&bc("EMPTY_DOMAIN_NOT_ALLOWED"),c=tb(c);h(this.config,a,c);return a}},{key:"addVar",value:function(a,b){if("string"==typeof a)return void 0===b&&(b=ib(this.defaultDomain,ie)),b=tb(b),h(this.config,a,b),a;b=a.domain,b=b?tb(b):ib(this.defaultDomain,ie);var c=a.id;if(c||bc("Solver#addVar: requires id"),h(this.config,c,b),a.distributeOptions&&"markov"===a.distributeOptions.valtype){var d=a.distributeOptions.matrix;d||(a.distributeOptions.expandVectorsWith?d=a.distributeOptions.matrix=[{vector:[]}]:bc("Solver#addVar: markov distribution requires SolverVar "+JSON.stringify(a)+" w/ distributeOptions:{matrix:[]}"));for(var e=0;e<d.length;++e){var f=d[e],g=f["boolean"];"function"==typeof g?f.booleanId=g(this,a):"string"==typeof g&&(f.booleanId=g)}}var i=this.vars;i.byId[c]&&bc("Solver#addVar: var.id already added: "+c),i.byId[c]=a,i.all.push(a);var j=a.name;return null!=j&&(null==i.byName[j]&&(i.byName[j]=[]),i.byName[j].push(a)),a}},{key:"+",value:function(a,b,c){return this.plus(a,b,c)}},{key:"plus",value:function(a,b,c){return t(this.config,"plus",[_b(a),_b(b),c&&_b(c)])}},{key:"-",value:function(a,b,c){return this.min(a,b,c)}},{key:"minus",value:function(a,b,c){return this.min(a,b,c)}},{key:"min",value:function(a,b,c){return t(this.config,"min",[_b(a),_b(b),c&&_b(c)])}},{key:"*",value:function(a,b,c){return this.ring_mul(a,b,c)}},{key:"times",value:function(a,b,c){return this.ring_mul(a,b,c)}},{key:"ring_mul",value:function(a,b,c){return t(this.config,"ring-mul",[_b(a),_b(b),c&&_b(c)])}},{key:"/",value:function(a,b,c){return this.div(a,b,c)}},{key:"div",value:function(a,b,c){return t(this.config,"ring-div",[_b(a),_b(b),c&&_b(c)])}},{key:"mul",value:function(a,b,c){return t(this.config,"mul",[_b(a),_b(b),c&&_b(c)])}},{key:"∑",value:function(a,b){return this.sum(a,b)}},{key:"sum",value:function(a,b){return t(this.config,"sum",ac(a),b&&_b(b))}},{key:"∏",value:function(a,b){return this.product(a,b)}},{key:"product",value:function(a,b){return t(this.config,"product",ac(a),b&&_b(b))}},{key:"{}≠",value:function(a){this.distinct(a)}},{key:"distinct",value:function(a){t(this.config,"distinct",ac(a))}},{key:"==",value:function(a,b){return this.eq(a,b)}},{key:"eq",value:function(a,b){return t(this.config,"eq",[_b(a),_b(b)])}},{key:"!=",value:function(a,b){return this.neq(a,b)}},{key:"neq",value:function(a,b){return t(this.config,"neq",[_b(a),_b(b)])}},{key:">=",value:function(a,b){return this.gte(a,b)}},{key:"gte",value:function(a,b){return t(this.config,"gte",[_b(a),_b(b)])}},{key:"<=",value:function(a,b){return this.lte(a,b)}},{key:"lte",value:function(a,b){return t(this.config,"lte",[_b(a),_b(b)])}},{key:">",value:function(a,b){return this.gt(a,b)}},{key:"gt",value:function(a,b){return t(this.config,"gt",[_b(a),_b(b)])}},{key:"<",value:function(a,b){return this.lt(a,b)}},{key:"lt",value:function(a,b){return t(this.config,"lt",[_b(a),_b(b)])}},{key:"_cacheReified",value:function(a,b,c,d){return t(this.config,"reifier",[_b(b),_b(c),d&&_b(d)],a)}},{key:"!=?",value:function(a,b,c){return this.isNeq(a,b,c)}},{key:"isNeq",value:function(a,b,c){return this._cacheReified("neq",a,b,c)}},{key:"==?",value:function(a,b,c){return this.isEq(a,b,c)}},{key:"isEq",value:function(a,b,c){return this._cacheReified("eq",a,b,c)}},{key:">=?",value:function(a,b,c){return this.isGte(a,b,c)}},{key:"isGte",value:function(a,b,c){return this._cacheReified("gte",a,b,c)}},{key:"<=?",value:function(a,b,c){return this.isLte(a,b,c)}},{key:"isLte",value:function(a,b,c){return this._cacheReified("lte",a,b,c)}},{key:">?",value:function(a,b,c){return this.isGt(a,b,c)}},{key:"isGt",value:function(a,b,c){return this._cacheReified("gt",a,b,c)}},{key:"<?",value:function(a,b,c){return this.isLt(a,b,c)}},{key:"isLt",value:function(a,b,c){return this._cacheReified("lt",a,b,c)}},{key:"solve",value:function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],b=void 0===a.log?hf:a.log,c=a.max||1e3;return this._prepare(a,b),a._debug&&this._debugLegible(),a._debugConfig&&this._debugConfig(),a._debugSpace&&console.log("## _debugSpace:\n",_c()(this._space)),a._debugSolver&&this._debugSolver(),this._run(c,b),this.solutions}},{key:"_prepare",value:function(a,b){b>=jf&&(console.log("      - FD Preparing..."),console.time("      - FD Prepare Time"));for(var c=this.config,d=c.all_var_names,e=0;e<d.length;++e){var f=d[e],g=this.vars.byId[f];g&&bd(f,g,c)}a.vars&&"all"!==a.vars&&n(c,"targeted_var_names",ac(a.vars));var h=a.distribute||this.distribute;"string"==typeof h?l(c,h):o(c,h);var i=ed(c);this._space=i,this.state.space=i,this.state.more=!0,this.state.stack=[],this._prepared=!0,b>=jf&&console.timeEnd("      - FD Prepare Time")}},{key:"_run",value:function(a,b,c){this._prepared=!1;var d=this.state;b>=jf&&(console.log("      - FD Var Count: "+this.config.all_var_names.length),console.log("      - FD Constraint Count: "+this.config.all_constraints.length),console.log("      - FD Propagator Count: "+this.config._propagators.length),console.log("      - FD Solving..."),console.time("      - FD Solving Time"));for(var e=!1,f=d.space.vardoms,g=0,h=f.length;g<h;++g)if(f[g]===ff){e=!0;break}var i=void 0;i=e?[]:ad(d,this.config,a),b>=jf&&(console.timeEnd("      - FD Solving Time"),console.log("      - FD Solutions: "+i.length)),c||cd(i,this.config,this.solutions,b)}},{key:"space_add_var_range",value:function(a,b,c){g(this.config,a,b,c);return a}},{key:"domain_fromList",value:function(a){return jb(oa(a))}},{key:"domain_max",value:function(a){return Ya(a)?lf:Ta(a)}},{key:"domain_toList",value:function(a){return pa(a)}},{key:"getDomain",value:function(a,b){return jb(a.vardoms[b])}},{key:"branch_from_current_solution",value:function(){var b=gd(this.state.space,this.config);return new a({config:b})}},{key:"setOption",value:function(a,b,c){n(this.config,a,b,c)}},{key:"_debugLegible",value:function(){var a=JSON.parse(JSON.stringify(this.config)),b=a.all_var_names,c=a.targetedVars,d=a.all_constraints,e=a.initial_domains,f=a._propagators;a.all_var_names="<removed>",a.all_constraints="<removed>",a.initial_domains="<removed>",a.initial_domains="<removed>","all"!==c&&(a.targetedVars="<removed>"),a._propagators="<removed>",a._varToPropagators="<removed>",a._var_names_trie="<removed>",console.log("\n## _debug:\n"),console.log("- config:"),console.log(_c()(a)),console.log("- vars ("+b.length+"):"),console.log(b.map(function(a,b){return b+": ["+jb(e[b])+"] "+(a===String(b)?"":" // "+a)}).join("\n")),"all"!==c&&console.log("- targeted vars ("+c.length+"): "+c.join(", ")),console.log("- constraints ("+d.length+" -> "+f.length+"):"),console.log(d.map(function(a,b){return void 0===a.param?b+": "+a.name+"("+a.varIndexes+")      --->  "+a.varIndexes.map(function(a){return JSON.stringify(e[a])}).join(",  "):"reifier"===a.name?b+": "+a.name+"["+a.param+"]("+a.varIndexes+")      --->  "+JSON.stringify(e[a.varIndexes[0]])+" "+a.param+" "+JSON.stringify(e[a.varIndexes[1]])+" = "+JSON.stringify(e[a.varIndexes[2]]):b+": "+a.name+"("+a.varIndexes+") = "+a.param+"      --->  "+a.varIndexes.map(function(a){return JSON.stringify(e[a])}).join(",  ")+" -> "+JSON.stringify(e[a.param])}).join("\n")),console.log("##/\n")}},{key:"_debugSolver",value:function(){console.log("## _debugSolver:\n");var a=_c(),b=this.config;console.log("# Config:"),console.log(a($c(b)));var c=b.all_var_names;console.log("# Variables ("+c.length+"x):"),console.log("  index name domain toArr");for(var d=0;d<c.length;++d)console.log("  ",d,":",c[d],":",b.initial_domains[d],"(= ["+jb(b.initial_domains[d])+"])");var e=b.all_constraints;console.log("# Constraints ("+e.length+"x):"),console.log("  index name vars param");for(var f=0;f<e.length;++f)console.log("  ",f,":",e[f].name,":",e[f].varIndexes.join(","),":",e[f].param);var g=b._propagators;console.log("# Propagators ("+g.length+"x):"),console.log("  index name vars args");for(var h=0;h<g.length;++h)console.log("  ",h,":",g[h].name,":",g[h].index1,g[h].index2,g[h].index3,":",g[h].arg1,g[h].arg2);console.log("##")}},{key:"_debugConfig",value:function(){var a=$c(this.config);a.initial_domains=a.initial_domains.map(jb),console.log("## _debugConfig:\n",_c()(a))}}]),a}(),pf=void 0,qf=0,rf=10,sf=rf+1,tf=16384,uf=4096,vf=-1,wf=void 0,xf=8,yf=16,zf=32,Af=64;return of}();exports["default"]=Solver;
//# sourceMappingURL=finitedomain.dist.min.js.map